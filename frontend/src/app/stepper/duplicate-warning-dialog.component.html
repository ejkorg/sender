<h2>Confirm Resubmission</h2>

<div class="dialog-content">
  <p class="lead" *ngIf="otherUserCount > 0; else sameUser">
    {{ otherUserCount }} payload{{ otherUserCount === 1 ? '' : 's' }} were most recently reloaded by another teammate.
  </p>
  <ng-template #sameUser>
    <p class="lead">These payloads have already been staged. Review the details below before continuing.</p>
  </ng-template>

  <ul class="duplicate-list">
    <li *ngFor="let dup of duplicatesToShow" class="list-item">
      <div class="payload">
          <div class="payload-ids">
          <span class="payload-id" [appTooltip]="'Metadata ID'">{{ dup.metadataId }}</span>
          <span class="payload-id" [appTooltip]="'Data ID'">{{ dup.dataId }}</span>
        </div>
        <div class="payload-meta">
          <app-icon name="person" ariaHidden="true"></app-icon>
          <span>{{ displayUser(dup.lastRequestedBy || dup.stagedBy) }}</span>
          <span class="timestamp" *ngIf="dup.lastRequestedAt || dup.stagedAt">{{ formatTimestamp(dup.lastRequestedAt || dup.stagedAt) }}</span>
          <span class="status" *ngIf="dup.previousStatus">status {{ dup.previousStatus }}</span>
        </div>
      </div>
    </li>
  </ul>
  <p class="truncation" *ngIf="data.duplicates.length > duplicatesToShow.length">
    Showing first {{ duplicatesToShow.length }} duplicates of {{ data.duplicates.length }}.
  </p>
  <p class="note">Continuing will requeue these payloads under your account.</p>
  </div>

  <div class="dialog-actions" style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px;">
    <button type="button" (click)="cancel()">Cancel</button>
    <button type="button" (click)="continue()">Continue</button>
  </div>
