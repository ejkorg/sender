%% Level-1 Data Flow Diagram (Mermaid)
%% Entities: User, Frontend, Backend (Stage, Enqueue, Dispatch), Ref DB, DTP DB
flowchart TD
  User[User]
  Browser[Browser]
  Frontend[Frontend]

  subgraph Backend[Backend Services]
    StageAPI[Stage API]
    SenderAPI[Sender API]
    DispatchSvc[Dispatch Service]
    SenderSvc[Sender Service]
    RefDbSvc[RefDb Service]
  end

  RefDB[Ref DB]
  DTPDB[DTP DB]

  User --> Browser
  Browser --> Frontend
  Frontend --> StageAPI
  StageAPI --> Frontend

  Frontend --> SenderAPI
  SenderAPI --> RefDbSvc
  RefDbSvc --> RefDB

  SenderSvc --> RefDbSvc
  RefDbSvc --> RefDB

  DispatchSvc --> RefDbSvc
  RefDbSvc --> RefDB
  DispatchSvc --> DTPDB

  Frontend --> StageAPI

  classDef db fill:#fef3c7,stroke:#b58900;
  class RefDB,DTPDB db;
