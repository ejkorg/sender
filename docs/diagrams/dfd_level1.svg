<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 3132.96875 332.1259765625" height="332.1259765625" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="3132.96875" id="container"><style>#container{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#container .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#container .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#container .error-icon{fill:#552222;}#container .error-text{fill:#552222;stroke:#552222;}#container .edge-thickness-normal{stroke-width:1px;}#container .edge-thickness-thick{stroke-width:3.5px;}#container .edge-pattern-solid{stroke-dasharray:0;}#container .edge-thickness-invisible{stroke-width:0;fill:none;}#container .edge-pattern-dashed{stroke-dasharray:3;}#container .edge-pattern-dotted{stroke-dasharray:2;}#container .marker{fill:#333333;stroke:#333333;}#container .marker.cross{stroke:#333333;}#container svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#container p{margin:0;}#container .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#container .cluster-label text{fill:#333;}#container .cluster-label span{color:#333;}#container .cluster-label span p{background-color:transparent;}#container .label text,#container span{fill:#333;color:#333;}#container .node rect,#container .node circle,#container .node ellipse,#container .node polygon,#container .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#container .rough-node .label text,#container .node .label text,#container .image-shape .label,#container .icon-shape .label{text-anchor:middle;}#container .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#container .rough-node .label,#container .node .label,#container .image-shape .label,#container .icon-shape .label{text-align:center;}#container .node.clickable{cursor:pointer;}#container .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#container .arrowheadPath{fill:#333333;}#container .edgePath .path{stroke:#333333;stroke-width:2.0px;}#container .flowchart-link{stroke:#333333;fill:none;}#container .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#container .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#container .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#container .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#container .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#container .cluster text{fill:#333;}#container .cluster span{color:#333;}#container div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#container .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#container rect.text{fill:none;stroke-width:0;}#container .icon-shape,#container .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#container .icon-shape p,#container .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#container .icon-shape rect,#container .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#container :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#container .datastore&gt;*{fill:#f0f9ff!important;stroke:#0284c7!important;}#container .datastore span{fill:#f0f9ff!important;stroke:#0284c7!important;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="container_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="container_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="container_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="container_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="container_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="container_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#container_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_User_API_0" d="M540.719,238L613.107,238C685.495,238,830.271,238,914.693,238C999.115,238,1023.182,238,1035.216,238L1047.25,238"></path><path marker-end="url(#container_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_API_DB_0" d="M1311.25,238L1332.083,238C1352.917,238,1394.583,238,1435.583,238C1476.583,238,1516.917,238,1537.083,238L1557.25,238"></path><path marker-end="url(#container_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_DB_Scheduler_0" d="M1776.25,220.892L1797.083,217.577C1817.917,214.262,1859.583,207.631,1900.583,204.315C1941.583,201,1981.917,201,2002.083,201L2022.25,201"></path><path marker-end="url(#container_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Scheduler_Processor_0" d="M2228.578,201L2239.523,201C2250.469,201,2272.359,201,2293.592,202.696C2314.825,204.392,2335.4,207.785,2345.688,209.481L2355.975,211.177"></path><path marker-end="url(#container_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Processor_ExternalDBs_0" d="M2648.236,211L2673.931,205.646C2699.626,200.291,2751.016,189.583,2798.953,184.228C2846.891,178.874,2891.375,178.874,2913.617,178.874L2935.859,178.874"></path><path marker-end="url(#container_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Processor_DB_0" d="M2359.922,264.172L2348.977,265.977C2338.031,267.782,2316.141,271.391,2277.389,273.195C2238.638,275,2183.026,275,2117.526,275C2052.026,275,1976.638,275,1918.769,271.789C1860.9,268.579,1820.55,262.157,1800.375,258.947L1780.2,255.736"></path><path marker-end="url(#container_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Processor_Mail_0" d="M2648.236,265L2673.931,270.354C2699.626,275.709,2751.016,286.417,2796.878,291.772C2842.74,297.126,2883.073,297.126,2903.24,297.126L2923.406,297.126"></path></g><g class="edgeLabels"><g transform="translate(975.046875, 238)" class="edgeLabel"><g transform="translate(-51.203125, -12)" class="label"><foreignObject height="24" width="102.40625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>enqueue form</p></span></div></foreignObject></g></g><g transform="translate(1436.25, 238)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>validate &amp; persist EnqueueRequest</p></span></div></foreignObject></g></g><g transform="translate(1901.25, 201)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>new SenderQueueEntry row</p></span></div></foreignObject></g></g><g transform="translate(2294.25, 201)" class="edgeLabel"><g transform="translate(-40.671875, -12)" class="label"><foreignObject height="24" width="81.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>fetch batch</p></span></div></foreignObject></g></g><g transform="translate(2802.40625, 178.87401580810547)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>lookup metadata from external DBs</p></span></div></foreignObject></g></g><g transform="translate(2127.4140625, 275)" class="edgeLabel"><g transform="translate(-71.1953125, -12)" class="label"><foreignObject height="24" width="142.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>update status in DB</p></span></div></foreignObject></g></g><g transform="translate(2802.40625, 297.12598419189453)" class="edgeLabel"><g transform="translate(-65.1328125, -12)" class="label"><foreignObject height="24" width="130.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>send notifications</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="Notes" class="cluster"><rect height="153" width="890.84375" y="8" x="8" style=""></rect><g transform="translate(432.4140625, 8)" class="cluster-label"><foreignObject height="24" width="42.015625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Notes</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(173, 84.5)" id="flowchart-N1-21" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Queue rows are SenderQueueEntry entity</p></span></div></foreignObject></g></g><g transform="translate(608.421875, 84.5)" id="flowchart-N2-22" class="node default"><rect height="78" width="510.84375" y="-39" x="-255.421875" style="" class="basic label-container"></rect><g transform="translate(-225.421875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="450.84375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Metadata rows stored via ExternalMetadataRepository/JdbcExternalMetadataRepository</p></span></div></foreignObject></g></g></g></g><g transform="translate(453.421875, 238)" id="flowchart-User-0" class="node default"><rect height="54" width="174.59375" y="-27" x="-87.296875" style="" class="basic label-container"></rect><g transform="translate(-57.296875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="114.59375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>User / Frontend</p></span></div></foreignObject></g></g><g transform="translate(1181.25, 238)" id="flowchart-API-1" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>SenderController (handles POST /enqueue)</p></span></div></foreignObject></g></g><g transform="translate(1668.75, 238)" id="flowchart-DB-2" class="node default datastore"><path transform="translate(-107.5, -55.21323529411765)" style="fill:#f0f9ff !important;stroke:#0284c7 !important" class="basic label-container" d="M0,15.808823529411764 a107.5,15.808823529411764 0,0,0 215,0 a107.5,15.808823529411764 0,0,0 -215,0 l0,78.80882352941177 a107.5,15.808823529411764 0,0,0 215,0 l0,-78.80882352941177"></path><g transform="translate(-100, -14)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>App DB - sender_queue table</p></span></div></foreignObject></g></g><g transform="translate(2127.4140625, 201)" id="flowchart-Scheduler-3" class="node default"><rect height="54" width="202.328125" y="-27" x="-101.1640625" style="" class="basic label-container"></rect><g transform="translate(-71.1640625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="142.328125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>DiscoveryScheduler</p></span></div></foreignObject></g></g><g transform="translate(2518.6640625, 238)" id="flowchart-Processor-4" class="node default"><rect height="54" width="317.484375" y="-27" x="-158.7421875" style="" class="basic label-container"></rect><g transform="translate(-128.7421875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="257.484375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>SenderService.processQueueEntry()</p></span></div></foreignObject></g></g><g transform="translate(3026.1875, 178.87401580810547)" id="flowchart-ExternalDBs-5" class="node default datastore"><path transform="translate(-86.328125, -41.25196850393701)" style="fill:#f0f9ff !important;stroke:#0284c7 !important" class="basic label-container" d="M0,14.501312335958005 a86.328125,14.501312335958005 0,0,0 172.65625,0 a86.328125,14.501312335958005 0,0,0 -172.65625,0 l0,53.501312335958005 a86.328125,14.501312335958005 0,0,0 172.65625,0 l0,-53.501312335958005"></path><g transform="translate(-78.828125, -2)" style="" class="label"><rect></rect><foreignObject height="24" width="157.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>External Data Sources</p></span></div></foreignObject></g></g><g transform="translate(3026.1875, 297.12598419189453)" id="flowchart-Mail-6" class="node default"><rect height="54" width="197.5625" y="-27" x="-98.78125" style="" class="basic label-container"></rect><g transform="translate(-68.78125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="137.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>MailService / SMTP</p></span></div></foreignObject></g></g></g></g></g></svg>